<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .yo-popup {
            position: fixed;
            background: #fff;
            padding: 40px;
            border: 4px solid;
            z-index: 1000;
        }

        .yo-mask {
            position: fixed;
            background: rgba(0, 0, 0, .7);
            top: 0;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 999;
        }
    </style>
</head>

<body>
    <button class="trigger">登录</button>
    <div class="popup">
        <form>
            <div>
                UerName:
                <input type="text">
            </div>
            <div>
                Password:
                <input type="password">
            </div>
            <button type="submit">Submit</button>
        </form>
    </div>
    <div>
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptatum repellat dicta rem culpa blanditiis
        laudantium, quam natus illum possimus ratione ipsum nisi, repudiandae quas perferendis ea suscipit sed? Impedit,
        facere.
    </div>
</body>
<script>
    // 首先,点击一个按钮,弹出一个弹出层和一个遮罩, 同时弹出层的位置得修改.
    // 点击遮罩, 弹出层和遮罩同时隐藏
    /***
     *  要点击一个按钮,首先先要获得它,通过document.querySelector,弹出层是用户自己定义的.获取弹出层
     * 用document.querySelector()方法,然后给弹出层添加一个类名,这样弹出层就有了插件的样式.
     * 遮罩创建用document.createElement();然后给遮罩添加一个类名,就有了遮罩的样式(前提得写好样式),
     * 一开始隐藏,并把遮罩添加到最后,它的z-index比弹出层低一级.
     */
    let trigger, popup, mask, config;
    let defaultConfig = {
        position: 'center',
        offsetY: 0,
        offsetX: 0,
        on: 'click',
        keyToHide: 'Escape',
    }

    boot('.trigger', '.popup', {});
    function boot(triggerSelector, popupSelector, custom = {}) {
        trigger = document.querySelector(triggerSelector);
        popup = document.querySelector(popupSelector);

        loadConfig(custom);
        initPopup();
        initMask();
        bindOpen();
        bindClose();
    }

    function loadConfig(custom) {
        config = Object.assign({}, defaultConfig, custom);
    }

    function initPopup() {
        popup.hidden = true;
        popup.classList.add('yo-popup');
    }

    function initMask() {
        mask = document.createElement('div');
        mask.classList.add('yo-mask');
        mask.hidden = true;
        document.body.appendChild(mask);
    }

    function bindOpen() {
        trigger.addEventListener(config.on, () => {
            setVisibility(true);
        })
        repositionPopup(config.position, config.offsetY, config.offsetX);
    }

    function repositionPopup(position = 'center', yOffset = 0, xOffset = 0) {
        let windowWidth = window.innerWidth;
        let windowHeight = window.innerHeight;
        let width = popup.offsetWidth;
        let height = popup.offsetHeight;

        if (!position.includes('-')) {
            if (position == 'left' || position == 'right')
                position += '-centery';
            else if (position == 'top' || position == 'bottom')
                position += '-centerx';
            else
                position = 'centerx-centery';
        }

        if (position.includes('centerx'))
            popup.style.left = windowWidth / 2 - width / 2 + xOffset + 'px';

        if (position.includes('centery'))
            popup.style.top = windowHeight / 2 - height / 2 + yOffset + 'px';

        if (position.includes('left'))
            popup.style.left = xOffset + 'px';
        if (position.includes('right'))
            popup.style.right = xOffset + 'px';
        if (position.includes('top'))
            popup.style.top = yOffset + 'px';
        if (position.includes('bottom'))
            popup.style.bottom = yOffset + 'px';
    }

    function bindClose() {
        mask.addEventListener(config.on, () => {
            setVisibility(false);
        });
        window.addEventListener('keyup', (e) => {
            if (e.key == config.keyToHide)
                setVisibility(false);
        })
    }

    function setVisibility(show = true) {
        mask.hidden = popup.hidden = !show;
    }
</script>

</html>